<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>dgpost.transform package &mdash; dgpost  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/autodoc_pydantic.css" type="text/css" />
    <link rel="shortcut icon" href="_static/dgpost_ico.png"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="dgpost.transform.circuit_utils package" href="dgpost.transform.circuit_utils.html" />
    <link rel="prev" title="dgpost autodocs" href="dgpost.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> dgpost
            <img src="_static/dgpost_logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">dgpost user manual</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html"><strong>dgpost</strong> installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html"><strong>dgpost</strong> usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="features.html"><strong>dgpost</strong> features</a></li>
<li class="toctree-l1"><a class="reference internal" href="version.html"><strong>dgpost</strong> version history</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">dgpost function library</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="stubs/dgpost.transform.catalysis.html"><strong>catalysis</strong>: common calculations in catalytic testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="stubs/dgpost.transform.electrochemistry.html"><strong>electrochemistry</strong>: calculations relevant in electrochemistry</a></li>
<li class="toctree-l1"><a class="reference internal" href="stubs/dgpost.transform.impedance.html"><strong>impedance</strong>: fitting electrochemical impedance spectra</a></li>
<li class="toctree-l1"><a class="reference internal" href="stubs/dgpost.transform.rates.html"><strong>rates</strong>: determining molar rates of chemical species</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">dgpost developer manual</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="contributing.html">contributing to <strong>dgpost</strong></a></li>
<li class="toctree-l1 current"><a class="reference internal" href="dgpost.html"><strong>dgpost</strong> autodocs</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#"><strong>dgpost.transform</strong> package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#catalysis-common-calculations-in-catalytic-testing"><strong>catalysis</strong>: common calculations in catalytic testing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#electrochemistry-calculations-relevant-in-electrochemistry"><strong>electrochemistry</strong>: calculations relevant in electrochemistry</a></li>
<li class="toctree-l3"><a class="reference internal" href="#impedance-fitting-electrochemical-impedance-spectra"><strong>impedance</strong>: fitting electrochemical impedance spectra</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rates-determining-molar-rates-of-chemical-species"><strong>rates</strong>: determining molar rates of chemical species</a></li>
<li class="toctree-l3"><a class="reference internal" href="#namespace-utilities-for-combining-namespaces"><strong>namespace</strong>: utilities for combining namespaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="#subpackages">Subpackages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="dgpost.transform.circuit_utils.html">dgpost.transform.circuit_utils package</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="dgpost.utils.html"><strong>dgpost.utils</strong> package</a></li>
<li class="toctree-l2"><a class="reference internal" href="dgpost.html#dgpost-main">dgpost.main</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">dgpost</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="dgpost.html"><strong>dgpost</strong> autodocs</a> &raquo;</li>
      <li><strong>dgpost.transform</strong> package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/dgpost.transform.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-dgpost.transform">
<span id="dgpost-transform-package"></span><h1><strong>dgpost.transform</strong> package<a class="headerlink" href="#module-dgpost.transform" title="Permalink to this headline"></a></h1>
<span class="target" id="module-dgpost.transform.catalysis"></span><section id="catalysis-common-calculations-in-catalytic-testing">
<h2><strong>catalysis</strong>: common calculations in catalytic testing<a class="headerlink" href="#catalysis-common-calculations-in-catalytic-testing" title="Permalink to this headline"></a></h2>
<p><em>Code author: Peter Kraus</em></p>
<p>Includes functions to calculate the reactant- and product-based
<a class="reference internal" href="#dgpost.transform.catalysis.conversion" title="dgpost.transform.catalysis.conversion"><code class="xref py py-func docutils literal notranslate"><span class="pre">conversion()</span></code></a>, atom-based
<a class="reference internal" href="#dgpost.transform.catalysis.selectivity" title="dgpost.transform.catalysis.selectivity"><code class="xref py py-func docutils literal notranslate"><span class="pre">selectivity()</span></code></a>,
<a class="reference internal" href="#dgpost.transform.catalysis.catalytic_yield" title="dgpost.transform.catalysis.catalytic_yield"><code class="xref py py-func docutils literal notranslate"><span class="pre">catalytic_yield()</span></code></a>, and
<a class="reference internal" href="#dgpost.transform.catalysis.atom_balance" title="dgpost.transform.catalysis.atom_balance"><code class="xref py py-func docutils literal notranslate"><span class="pre">atom_balance()</span></code></a>.</p>
<p>Names of compounds within the specified mixtures are parsed to SMILES, and the
cross-matching of the <code class="docutils literal notranslate"><span class="pre">feestock</span></code>, internal <code class="docutils literal notranslate"><span class="pre">standard</span></code>, and the components of
<code class="docutils literal notranslate"><span class="pre">xin</span></code> and <code class="docutils literal notranslate"><span class="pre">xout</span></code> (or <code class="docutils literal notranslate"><span class="pre">rin</span></code> and <code class="docutils literal notranslate"><span class="pre">rout</span></code>) is performed using these SMILES.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This module assumes that the provided inlet and outlet compositions, whether
mole fractions or molar rates, contain all species. This implies that the
atomic balance of the inlet and outlet is near unity. If multiple inlet/outlet
streams are present in the experiment, they need to be appropriately combined
into a single namespace, e.g. using functions in the <a class="reference internal" href="#module-dgpost.transform.rates" title="dgpost.transform.rates"><code class="xref py py-mod docutils literal notranslate"><span class="pre">dgpost.transform.rates</span></code></a>
before using the functions in this module.</p>
</div>
<dl class="py function">
<dt class="sig sig-object py" id="dgpost.transform.catalysis.conversion">
<span class="sig-prename descclassname"><span class="pre">dgpost.transform.catalysis.</span></span><span class="sig-name descname"><span class="pre">conversion</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">feedstock</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">element</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'product'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">standard</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'N2'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">product</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dgpost.transform.catalysis.conversion" title="Permalink to this definition"></a></dt>
<dd><p>Calculates the conversion of <code class="docutils literal notranslate"><span class="pre">feedstock</span></code> <span class="math notranslate nohighlight">\(f\)</span> into other products
<span class="math notranslate nohighlight">\(p\)</span>. The feedstock must be a species present in the inlet. By default,
a product-based carbon conversion (<span class="math notranslate nohighlight">\(\text{el} = \text{C}\)</span>), using
data from the outlet, is computed.</p>
<p>The product-based conversion <span class="math notranslate nohighlight">\(X_p\)</span> is calculated using the outlet mole
fractions <span class="math notranslate nohighlight">\(x_\text{out}(s)\)</span> of species <span class="math notranslate nohighlight">\(s\)</span>, or the outlet molar
rates <span class="math notranslate nohighlight">\(\dot{n}_\text{out}(s)\)</span>. It is calculated on an elemental basis
by considering the number of atoms of a certain element, <span class="math notranslate nohighlight">\(n_\text{el}\)</span>,
as:</p>
<div class="math notranslate nohighlight">
\[X_{p, \text{el}} =
\frac{\sum_{s} n_\text{el}(s) x_\text{out}(s) - n_\text{el}(f) x_\text{out}(f)}
{\sum_{s} n_\text{el}(s) x_\text{out}(s)} =
\frac{\sum_{s} n_\text{el}(s) \dot{n}_\text{out}(s) - n_\text{el}(f) \dot{n}_\text{out}(f)}
{\sum_{s} n_\text{el}(s) \dot{n}_\text{out}(s)}\]</div>
<p>Which requires the feedstock <span class="math notranslate nohighlight">\(f\)</span> to be quantified in the outlet composition.</p>
<p>If the outlet composition of <span class="math notranslate nohighlight">\(f\)</span> is not defined or not suitable, the user
should request a “mixed” conversion <span class="math notranslate nohighlight">\(X_m\)</span>, which is calculated using:</p>
<div class="math notranslate nohighlight">
\[X_{m, \text{el}} =
\frac{\sum_{p}^{p\ne f} n_\text{el}(p) x_\text{out}(p) f_e}
{n_\text{el}(f) x_\text{in}(f)} =
\frac{\sum_{p}^{p\ne f} n_\text{el}(p) \dot{n}_\text{out}(s)}
{n_\text{el}(f) \dot{n}_\text{in}(f)}\]</div>
<p>Here, the expansion factor <span class="math notranslate nohighlight">\(f_e\)</span> is introduced, which is defined as the
expansion ratio of the internal <code class="docutils literal notranslate"><span class="pre">standard</span></code> in the mixture:
<span class="math notranslate nohighlight">\(f_e = x_\text{out}(\text{i.s.}) / x_\text{in}(\text{i.s.})\)</span>. The
internal standard is set to N2 by default. When molar rates <span class="math notranslate nohighlight">\(\dot{n}\)</span>
are used, accounting for expansion in this way is not necessary.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Calculating mixed conversion <span class="math notranslate nohighlight">\(X_m\)</span> using inlet mole fraction
of feedstock is not ideal and should be avoided, as the value is strongly
convoluted with the <a class="reference internal" href="#dgpost.transform.catalysis.atom_balance" title="dgpost.transform.catalysis.atom_balance"><code class="xref py py-func docutils literal notranslate"><span class="pre">atom_balance()</span></code></a> of the mixtures.</p>
</div>
<p>Finally, the calculation of reactant-based (or feedstock-based) conversion,
<span class="math notranslate nohighlight">\(X_r\)</span>, proceeds as follows:</p>
<div class="math notranslate nohighlight">
\[X_{r} = \frac{x_\text{in}(f) -  x_\text{out}(f) f_e}{x_\text{in}(f)} =
\frac{\dot{n}_\text{in}(f) - \dot{n}_\text{out}(f)}{\dot{n}_\text{in}(f)}\]</div>
<p>The selection of the element <span class="math notranslate nohighlight">\(\text{el}\)</span> is meaningless for the reactant
-based conversion.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Note that the calculated values of <span class="math notranslate nohighlight">\(X_p\)</span>, <span class="math notranslate nohighlight">\(X_m\)</span>, and <span class="math notranslate nohighlight">\(X_r\)</span>
will differ from one another in cases where the atomic balances of the inlet
and outlet mixtures are different from unity!</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>feedstock</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Name of the feedstock. Parsed into SMILES and matched against <code class="docutils literal notranslate"><span class="pre">xin</span></code> and
<code class="docutils literal notranslate"><span class="pre">xout</span></code>.</p></li>
<li><p><strong>xin</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Quantity</span></code>]]) – A dictionary containing the composition of the inlet mixture with the names
of the chemicals as <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code> keys. Has to be supplied with <code class="docutils literal notranslate"><span class="pre">xout</span></code>.
Cannot be supplied with <code class="docutils literal notranslate"><span class="pre">rin</span></code> or <code class="docutils literal notranslate"><span class="pre">rout</span></code>.</p></li>
<li><p><strong>xout</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Quantity</span></code>]]) – A dictionary containing the composition of the outlet mixture with the names
of the chemicals as <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code> keys. Has to be supplied with <code class="docutils literal notranslate"><span class="pre">xin</span></code>.
Cannot be supplied with <code class="docutils literal notranslate"><span class="pre">rin</span></code> or <code class="docutils literal notranslate"><span class="pre">rout</span></code>.</p></li>
<li><p><strong>rin</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Quantity</span></code>]]) – A dictionary containing the molar rates of species in the inlet mixture
with the names of the chemicals as <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code> keys. Has to be supplied
with <code class="docutils literal notranslate"><span class="pre">rout</span></code>. Cannot be supplied with <code class="docutils literal notranslate"><span class="pre">xin</span></code> or <code class="docutils literal notranslate"><span class="pre">xout</span></code>.</p></li>
<li><p><strong>rout</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Quantity</span></code>]]) – A dictionary containing the molar rates of species in the outlet mixture
with the names of the chemicals as <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code> keys. Has to be supplied
with <code class="docutils literal notranslate"><span class="pre">rin</span></code>. Cannot be supplied with <code class="docutils literal notranslate"><span class="pre">xin</span></code> or <code class="docutils literal notranslate"><span class="pre">xout</span></code>.</p></li>
<li><p><strong>element</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – Name of the element for determining conversion. If not specified, set to the
highest-priority (C &gt; H &gt; O) element in <code class="docutils literal notranslate"><span class="pre">feedstock</span></code>.</p></li>
<li><p><strong>type</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Conversion type. Can be one of <code class="docutils literal notranslate"><span class="pre">{&quot;reactant&quot;,</span> <span class="pre">&quot;product&quot;,</span> <span class="pre">&quot;mixed&quot;}</span></code>, selecting
the conversion calculation algorithm.</p></li>
<li><p><strong>product</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>]) – <strong>Deprecated.</strong> Switches between reactant and product-based conversion.</p></li>
<li><p><strong>standard</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Internal standard for normalizing the compositions. By default set to “N2”.
Only used when <code class="docutils literal notranslate"><span class="pre">xin</span></code> and <code class="docutils literal notranslate"><span class="pre">xout</span></code> are supplied.</p></li>
<li><p><strong>output</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – A <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code> name of the output variable.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>ret</strong> – A <code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code> containing the calculated conversion with <code class="docutils literal notranslate"><span class="pre">output</span></code> as its key.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict[str, pint.Quantity]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dgpost.transform.catalysis.selectivity">
<span class="sig-prename descclassname"><span class="pre">dgpost.transform.catalysis.</span></span><span class="sig-name descname"><span class="pre">selectivity</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">feedstock</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">element</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dgpost.transform.catalysis.selectivity" title="Permalink to this definition"></a></dt>
<dd><p>Calculates product-based atomic selectivities of all species <span class="math notranslate nohighlight">\(s\)</span>,
excluding the <code class="docutils literal notranslate"><span class="pre">feedstock</span></code> <span class="math notranslate nohighlight">\(f\)</span>. The sum of selectivities is normalised
to unity. Works with both mole fractions <span class="math notranslate nohighlight">\(x\)</span> as well as molar production
rates <span class="math notranslate nohighlight">\(\dot{n}\)</span>:</p>
<div class="math notranslate nohighlight">
\[S_\text{el}(p) =
\frac{\sum_{p}^{p \ne f} n_\text{el}(p) x_\text{out}(p)}
{\sum_{s} n_\text{el}(s) x_\text{out}(s)} =
\frac{\sum_{p}^{p \ne f} n_\text{el}(p) \dot{n}_\text{out}(p)}
{\sum_{s} n_\text{el}(s) \dot{n}_\text{out}(s)}\]</div>
<p>Only the outlet fractions/rates are considered. The sum on in the numerator runs
over all products <span class="math notranslate nohighlight">\(p\)</span> (i.e. <span class="math notranslate nohighlight">\(p \ne f\)</span>), while the sum in the
denominator runs over all species <span class="math notranslate nohighlight">\(s\)</span>. The value <span class="math notranslate nohighlight">\(n_\text{el}(s)\)</span>
is the number of atoms of element <span class="math notranslate nohighlight">\(\text{el}\)</span> in species <span class="math notranslate nohighlight">\(s\)</span>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The selectivity calculation assumes that all products have been determined;
it provides no information about the mass or atomic balance.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When molar rates <span class="math notranslate nohighlight">\(\dot{n}\)</span> are used, only creation rates (i.e.
where <span class="math notranslate nohighlight">\(\dot{n}(p) &gt; 0\)</span>) are used for calculation of selectivity.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>feedstock</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Name of the feedstock. Parsed into SMILES and matched against the specified
inlet and outlet species</p></li>
<li><p><strong>xout</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Quantity</span></code>]]) – Prefix of the columns determining the outlet composition.</p></li>
<li><p><strong>rout</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Quantity</span></code>]]) – Prefix of the columns determining the outlet molar rates.</p></li>
<li><p><strong>element</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – The element for determining conversion. If not specified, set from <code class="docutils literal notranslate"><span class="pre">feedstock</span></code>
using <code class="xref py py-func docutils literal notranslate"><span class="pre">dgpost.transform.chemhelpers.default_element()</span></code>.</p></li>
<li><p><strong>output</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – A <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code> prefix for the output variables.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>ret</strong> – A <code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code> containing the calculated selectivities using <code class="docutils literal notranslate"><span class="pre">output</span></code> as
the prefix for each key.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict[str, pint.Quantity]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dgpost.transform.catalysis.catalytic_yield">
<span class="sig-prename descclassname"><span class="pre">dgpost.transform.catalysis.</span></span><span class="sig-name descname"><span class="pre">catalytic_yield</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">feedstock</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">element</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">standard</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'N2'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'product'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dgpost.transform.catalysis.catalytic_yield" title="Permalink to this definition"></a></dt>
<dd><p>Calculates the catalytic yield <span class="math notranslate nohighlight">\(Y_p\)</span>, defined as the product of conversion
and selectivity. By default, uses product-based conversion of feedstock for an
internal consistency with selectivity. The sum of all yields is equal to the
conversion. Implicitly runs <a class="reference internal" href="#dgpost.transform.catalysis.conversion" title="dgpost.transform.catalysis.conversion"><code class="xref py py-func docutils literal notranslate"><span class="pre">conversion()</span></code></a> and <a class="reference internal" href="#dgpost.transform.catalysis.selectivity" title="dgpost.transform.catalysis.selectivity"><code class="xref py py-func docutils literal notranslate"><span class="pre">selectivity()</span></code></a> on the
<code class="xref py py-class docutils literal notranslate"><span class="pre">pd.DataFrame</span></code>:</p>
<div class="math notranslate nohighlight">
\[Y_{p, \text{el}}(s) = X_{p, \text{el}}(s) \times S_{p, \text{el}}(s)\]</div>
<p>Where <span class="math notranslate nohighlight">\(s\)</span> is the product species, and the subscript <span class="math notranslate nohighlight">\(p\)</span> denotes it
is a product-based quantity, with respect to element <span class="math notranslate nohighlight">\(\text{el}\)</span>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>xin</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Quantity</span></code>]]) – Prefix of the columns determining the inlet composition.</p></li>
<li><p><strong>xout</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Quantity</span></code>]]) – Prefix of the columns determining the outlet composition.</p></li>
<li><p><strong>feedstock</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Name of the feedstock. Parsed into SMILES and matched against <code class="docutils literal notranslate"><span class="pre">xin</span></code> and
<code class="docutils literal notranslate"><span class="pre">xout</span></code>.</p></li>
<li><p><strong>element</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – The element for determining conversion. If not specified, set from <code class="docutils literal notranslate"><span class="pre">feedstock</span></code>
using <code class="xref py py-func docutils literal notranslate"><span class="pre">dgpost.transform.chemhelpers.default_element()</span></code>.</p></li>
<li><p><strong>standard</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Internal standard for normalizing the compositions. By default set to “N2”.</p></li>
<li><p><strong>type</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Select conversion calculation algorithm, see
<a class="reference internal" href="#dgpost.transform.catalysis.conversion" title="dgpost.transform.catalysis.conversion"><code class="xref py py-func docutils literal notranslate"><span class="pre">conversion()</span></code></a>.</p></li>
<li><p><strong>output</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – A <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code> prefix for the output variables.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>ret</strong> – A <code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code> containing the calculated yields using <code class="docutils literal notranslate"><span class="pre">output</span></code> as
the prefix for each key.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict[str, pint.Quantity]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dgpost.transform.catalysis.atom_balance">
<span class="sig-prename descclassname"><span class="pre">dgpost.transform.catalysis.</span></span><span class="sig-name descname"><span class="pre">atom_balance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">element</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'C'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">standard</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'N2'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dgpost.transform.catalysis.atom_balance" title="Permalink to this definition"></a></dt>
<dd><p>Calculates the atom balance of an <code class="docutils literal notranslate"><span class="pre">element</span></code> <span class="math notranslate nohighlight">\(\text{el}\)</span> between the
inlet and outlet mixtures. The total number of atoms of the specified element
is compared between between the inlet and outlet, normalized by an internal
<code class="docutils literal notranslate"><span class="pre">standard</span></code> if necessary:</p>
<div class="math notranslate nohighlight">
\[\text{atbal}_\text{el} =
\frac{\sum_s n_\text{el}(s) x_\text{out}(s) f_e}
{\sum_s n_\text{el}(s) x_\text{in}(s)} =
\frac{\sum_s n_\text{el}(s) \dot{n}_\text{out}(s)}
{\sum_s n_\text{el}(s) \dot{n}_\text{in}(s)}\]</div>
<p>Here the sum runs over all species <span class="math notranslate nohighlight">\(s\)</span>, <span class="math notranslate nohighlight">\(n_\text{el}(s)\)</span> is the
number of atoms of element <span class="math notranslate nohighlight">\(\text{el}\)</span> in <span class="math notranslate nohighlight">\(s\)</span>,  and <span class="math notranslate nohighlight">\(f_e\)</span>
is the expansion factor calculated using the internal <code class="docutils literal notranslate"><span class="pre">standard</span></code> as
<span class="math notranslate nohighlight">\(f_e = x_\text{out}(\text{i.s.}) / x_\text{in}(\text{i.s.})\)</span>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>xin</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Quantity</span></code>]]) – Prefix of the columns determining the inlet composition as a mole fraction.</p></li>
<li><p><strong>xout</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Quantity</span></code>]]) – Prefix of the columns determining the outlet composition as a mole fraction.</p></li>
<li><p><strong>rin</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Quantity</span></code>]]) – Prefix of the columns determining the inlet composition as a molar rate.</p></li>
<li><p><strong>rout</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Quantity</span></code>]]) – Prefix of the columns determining the outlet composition as a molar rate.</p></li>
<li><p><strong>element</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The element for determining conversion. If not specified, set to <code class="docutils literal notranslate"><span class="pre">&quot;C&quot;</span></code>.</p></li>
<li><p><strong>standard</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Internal standard for normalizing flows. By default set to <code class="docutils literal notranslate"><span class="pre">&quot;N2&quot;</span></code>.</p></li>
<li><p><strong>output</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – A <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code> prefix for the output variables.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>ret</strong> – A <code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code> containing the calculated atomic balance using <code class="docutils literal notranslate"><span class="pre">output</span></code> as
the key.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict[str, pint.Quantity]</p>
</dd>
</dl>
</dd></dl>

</section>
<span class="target" id="module-dgpost.transform.electrochemistry"></span><section id="electrochemistry-calculations-relevant-in-electrochemistry">
<h2><strong>electrochemistry</strong>: calculations relevant in electrochemistry<a class="headerlink" href="#electrochemistry-calculations-relevant-in-electrochemistry" title="Permalink to this headline"></a></h2>
<p><em>Code author: Peter Kraus</em></p>
<p>Includes functions for calculating applied voltage correction via the
<a class="reference internal" href="#dgpost.transform.electrochemistry.nernst" title="dgpost.transform.electrochemistry.nernst"><code class="xref py py-func docutils literal notranslate"><span class="pre">nernst()</span></code></a> equation, calculation of the
Faradaic efficiency (<a class="reference internal" href="#dgpost.transform.electrochemistry.fe" title="dgpost.transform.electrochemistry.fe"><code class="xref py py-func docutils literal notranslate"><span class="pre">fe()</span></code></a>), as well as
the calculation of total <a class="reference internal" href="#dgpost.transform.electrochemistry.charge" title="dgpost.transform.electrochemistry.charge"><code class="xref py py-func docutils literal notranslate"><span class="pre">charge()</span></code></a>, and
the <a class="reference internal" href="#dgpost.transform.electrochemistry.average_current" title="dgpost.transform.electrochemistry.average_current"><code class="xref py py-func docutils literal notranslate"><span class="pre">average_current()</span></code></a> from the total
charge and timestamps.</p>
<dl class="py function">
<dt class="sig sig-object py" id="dgpost.transform.electrochemistry.nernst">
<span class="sig-prename descclassname"><span class="pre">dgpost.transform.electrochemistry.</span></span><span class="sig-name descname"><span class="pre">nernst</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Ewe</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">R=&lt;Quantity(0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'ohm')&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">I=&lt;Quantity(0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'ampere')&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Eref=&lt;Quantity(0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'volt')&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">T=&lt;Quantity(298.15</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'kelvin')&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Q=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pH=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output='Eapp'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dgpost.transform.electrochemistry.nernst" title="Permalink to this definition"></a></dt>
<dd><p>Correct measured voltage to calculate the applied voltage, using corrections
for Ohmic drop, reference potential vs RHE, and ionic concentration using
the Nernst equation, either by providing <span class="math notranslate nohighlight">\(Q\)</span> and <span class="math notranslate nohighlight">\(n\)</span>, or by
providing the <span class="math notranslate nohighlight">\(pH\)</span>.</p>
<p>This function corrects the measured voltage <span class="math notranslate nohighlight">\(E_\text{we}\)</span> to applied
voltage <span class="math notranslate nohighlight">\(E\)</span>. For <span class="math notranslate nohighlight">\(E_\text{we} &gt; 0~\text{V}\)</span>, the following equation
is used:</p>
<div class="math notranslate nohighlight">
\[\begin{split}E &amp;= E_\text{we} - R |I| + E_\text{ref} + E_N \\
E_N &amp;= - \frac{\overline{R} T}{nF} ln(Q) = \frac{\overline{R} T}{F} ln(10) \text{pH}\end{split}\]</div>
<p>where <span class="math notranslate nohighlight">\(R |I|\)</span> is the product of cell resistance and the magnitude of the
applied current, <span class="math notranslate nohighlight">\(E_\text{ref}\)</span> is the potential of the reference electrode
vs RHE, <span class="math notranslate nohighlight">\(\overline{R}\)</span> is the molar gas constant, <span class="math notranslate nohighlight">\(T\)</span> is the
temperature, <span class="math notranslate nohighlight">\(n\)</span> is the number of electrones transferred, <span class="math notranslate nohighlight">\(F\)</span> is
the Faraday constant, <span class="math notranslate nohighlight">\(Q\)</span> is the reaction quotient, and <span class="math notranslate nohighlight">\(\text{pH}\)</span>
is the pH of the electrolyte.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The Ohmic loss <span class="math notranslate nohighlight">\(R |I|\)</span> always acts against the magnitude of the working
potential <span class="math notranslate nohighlight">\(E_\text{we}\)</span>. If <span class="math notranslate nohighlight">\(E_\text{we} &lt; 0~\text{V}\)</span>, the Ohmic
term <span class="math notranslate nohighlight">\(R |I|\)</span> is added to <span class="math notranslate nohighlight">\(E_\text{we}\)</span> to reduce its magnitude.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>Ewe</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Quantity</span></code>) – The measured working potential with respect to the reference electrode.
By default in V.</p></li>
<li><p><strong>R</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Quantity</span></code>) – The resistance of the cell. By default in Ω.</p></li>
<li><p><strong>I</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Quantity</span></code>) – The applied current. By default in A.</p></li>
<li><p><strong>Eref</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Quantity</span></code>) – The potential of the reference electrode with respect to RHE.
By default in V.</p></li>
<li><p><strong>T</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Quantity</span></code>) – Temperature of the working electrode, used in the Nernst equation.
By default 298.15 K.</p></li>
<li><p><strong>n</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]) – Number of electrons transferred in the process described by the Nernst
equation. Must be specified along <code class="docutils literal notranslate"><span class="pre">Q</span></code>, cannot be specified with <code class="docutils literal notranslate"><span class="pre">pH</span></code>.</p></li>
<li><p><strong>Q</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]) – The reaction quotient of the components of the process described by the
Nernst equation. Must be specified along <code class="docutils literal notranslate"><span class="pre">n</span></code>, cannot be specified with
<code class="docutils literal notranslate"><span class="pre">pH</span></code>.</p></li>
<li><p><strong>pH</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]) – The pH of the solution. This assumes the modelled process is the reduction
of <span class="math notranslate nohighlight">\(\text{H}^+ \rightarrow \text{H}\)</span>, i.e. <span class="math notranslate nohighlight">\(n = 1\)</span> and
<span class="math notranslate nohighlight">\(\text{ln}(Q) = -\text{ln}(10)\text{pH}\)</span></p></li>
<li><p><strong>output</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Name of the output variable. Defaults to <code class="docutils literal notranslate"><span class="pre">Eapp</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>dict(output, E)</strong> – Returns the calculated applied current in V.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict[str, pint.Quantity]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dgpost.transform.electrochemistry.fe">
<span class="sig-prename descclassname"><span class="pre">dgpost.transform.electrochemistry.</span></span><span class="sig-name descname"><span class="pre">fe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rate</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">I</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">charges</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dgpost.transform.electrochemistry.fe" title="Permalink to this definition"></a></dt>
<dd><p>Calculate the Faradaic efficiency <span class="math notranslate nohighlight">\(\eta_F\)</span> from a set of molar rates
<span class="math notranslate nohighlight">\(\dot{n}\)</span> corresponding to a single mixture, and the applied current
<span class="math notranslate nohighlight">\(I\)</span> required to produce that mixture from a source mixture. A set of
formal atomic charges corresponding to those in the species comprising the
source mixture has to be supplied.</p>
<p>This function implements the following equation to calculate <span class="math notranslate nohighlight">\(\eta_F\)</span>:</p>
<div class="math notranslate nohighlight">
\[\eta_F(x) = \frac{n_\text{el}(x)\dot{n}(x)}{I}\]</div>
<p>where <span class="math notranslate nohighlight">\(x\)</span> is a species in the mixture, <span class="math notranslate nohighlight">\(n_\text{el}(x)\)</span> is the number
of electrons required to produce <span class="math notranslate nohighlight">\(x\)</span> from the ions specified in the source
mixture, and <span class="math notranslate nohighlight">\(\dot{n}(x)\)</span> is the molar rate (production or flow) of species
<span class="math notranslate nohighlight">\(x\)</span>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rate</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Quantity</span></code>]) – A <code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code> of molar flow or production rates of species in a mixture.
By default in mol/l.</p></li>
<li><p><strong>I</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Quantity</span></code>) – The applied current. By default in A.</p></li>
<li><p><strong>charges</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>]) – A <code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code> of formal atomic/ionic charges of atoms in the source
mixture.</p></li>
<li><p><strong>output</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – Name of the prefix for the species in the output variable. Defaults to <code class="docutils literal notranslate"><span class="pre">fe</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>dict(output, E)</strong> – Returns the calculated Faradaic efficiencies.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict[str, pint.Quantity]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dgpost.transform.electrochemistry.charge">
<span class="sig-prename descclassname"><span class="pre">dgpost.transform.electrochemistry.</span></span><span class="sig-name descname"><span class="pre">charge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">I</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Q'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dgpost.transform.electrochemistry.charge" title="Permalink to this definition"></a></dt>
<dd><p>Calculate the total charge <span class="math notranslate nohighlight">\(Q\)</span> as a time-integral of the electric current:</p>
<div class="math notranslate nohighlight">
\[Q_n = \int_{t_0}^{t_n} I(t) dt = \sum_0^n I_n (t_n - t_{n-1})\]</div>
<p>where <span class="math notranslate nohighlight">\(I_n\)</span> is the instantaneous current and <span class="math notranslate nohighlight">\(t_n\)</span> is the time at the
<span class="math notranslate nohighlight">\(n\)</span>-th datapoint.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>time</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Quantity</span></code>) – An array of timestamps at which the instantaneous current was measured.</p></li>
<li><p><strong>I</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Quantity</span></code>) – Values of the instantaneous current.</p></li>
<li><p><strong>t0</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Quantity</span></code>]) – An optional timestamp representing the time at which charge was zero. If not
supplied, the first value in the <code class="docutils literal notranslate"><span class="pre">time</span></code> array will be used, with the charge
at that timestamp set to zero.</p></li>
<li><p><strong>output</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Prefix of the columns where the calculated rate will be stored.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>dict(output, Q)</strong> – Returns the integrated electrical charge.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict[str, pint.Quantity]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dgpost.transform.electrochemistry.average_current">
<span class="sig-prename descclassname"><span class="pre">dgpost.transform.electrochemistry.</span></span><span class="sig-name descname"><span class="pre">average_current</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Q</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'&lt;I&gt;'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dgpost.transform.electrochemistry.average_current" title="Permalink to this definition"></a></dt>
<dd><p>Calculate the average current <span class="math notranslate nohighlight">\(&lt;I&gt;\)</span> from a set of timestamped values of
electical charge,</p>
<div class="math notranslate nohighlight">
\[&lt;I&gt; = \frac{dQ}{dt} = \frac{Q_n - Q_{n-1}}{t_n - t_{n-1}}\]</div>
<p>where <span class="math notranslate nohighlight">\(Q_n\)</span> is the charge and <span class="math notranslate nohighlight">\(t_n\)</span> is the time at the <span class="math notranslate nohighlight">\(n\)</span>-th
datapoint.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>time</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Quantity</span></code>) – An array of timestamps at which the instantaneous current was measured.</p></li>
<li><p><strong>I</strong> – Values of the instantaneous current.</p></li>
<li><p><strong>t0</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Quantity</span></code>]) – An optional timestamp representing the time at which charge was zero. If not
supplied, the first value in the <code class="docutils literal notranslate"><span class="pre">time</span></code> array will be used, with the charge
at that timestamp set to zero.</p></li>
<li><p><strong>output</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Prefix of the columns where the calculated rate will be stored.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>dict(output, I)</strong> – Returns the average electrical current.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict[str, pint.Quantity]</p>
</dd>
</dl>
</dd></dl>

</section>
<span class="target" id="module-dgpost.transform.impedance"></span><section id="impedance-fitting-electrochemical-impedance-spectra">
<h2><strong>impedance</strong>: fitting electrochemical impedance spectra<a class="headerlink" href="#impedance-fitting-electrochemical-impedance-spectra" title="Permalink to this headline"></a></h2>
<p><em>Code author: Ueli Sauter,
Peter Kraus</em></p>
<p>Including functions relevant for Electrochemical Impedance Spectroscopy (EIS):
evaluation of an equivalent circuit as well as the fitting of the circuit to data
(<a class="reference internal" href="#dgpost.transform.impedance.calc_circuit" title="dgpost.transform.impedance.calc_circuit"><code class="xref py py-func docutils literal notranslate"><span class="pre">calc_circuit()</span></code></a> and
<a class="reference internal" href="#dgpost.transform.impedance.fit_circuit" title="dgpost.transform.impedance.fit_circuit"><code class="xref py py-func docutils literal notranslate"><span class="pre">fit_circuit()</span></code></a>), and an interpolation function
to find the <a class="reference internal" href="#dgpost.transform.impedance.lowest_real_impedance" title="dgpost.transform.impedance.lowest_real_impedance"><code class="xref py py-func docutils literal notranslate"><span class="pre">lowest_real_impedance()</span></code></a> in the data.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The functions in this module expect the whole EIS trace as input - the
<span class="math notranslate nohighlight">\(\text{Re}(Z)\)</span>, <span class="math notranslate nohighlight">\(-\text{Im}(Z)\)</span> and <span class="math notranslate nohighlight">\(f\)</span> are expected to
be <code class="xref py py-class docutils literal notranslate"><span class="pre">pint.Quantity</span></code> containing an <code class="xref py py-class docutils literal notranslate"><span class="pre">np.ndarray</span></code> (or similar
<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>-like object), which is then processed to a (set of) scalar
values. This means that for processing time resolved data, the functions
in this module have to be called on each timestep individually.</p>
</div>
<dl class="py function">
<dt class="sig sig-object py" id="dgpost.transform.impedance.fit_circuit">
<span class="sig-prename descclassname"><span class="pre">dgpost.transform.impedance.</span></span><span class="sig-name descname"><span class="pre">fit_circuit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">real</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">freq</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">circuit</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">initial_values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fit_bounds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fit_constants</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ignore_neg_res</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">upper_freq</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">inf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lower_freq</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">repeat</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'fit_circuit'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dgpost.transform.impedance.fit_circuit" title="Permalink to this definition"></a></dt>
<dd><p>Fits an equivalent circuit to the frequency-resolved EIS data.</p>
<p>For the fitting an equivalent circuit is needed, defined as a <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>.
The circuit may be composed of multiple circuit elements. To combine elements
in a series a dash (<code class="docutils literal notranslate"><span class="pre">-</span></code>) is used. Elements in parallel are wrapped by
<code class="docutils literal notranslate"><span class="pre">p(</span> <span class="pre">,</span> <span class="pre">)</span></code>. An element is defined by an identifier (usually letters) followed
by a digit. Already implemented elements are located in the
<a class="reference internal" href="dgpost.transform.circuit_utils.html#module-dgpost.transform.circuit_utils.circuit_components" title="dgpost.transform.circuit_utils.circuit_components"><code class="xref py py-mod docutils literal notranslate"><span class="pre">circuit_utils.circuit_components</span></code></a> module:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 11%" />
<col style="width: 16%" />
<col style="width: 21%" />
<col style="width: 19%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Symbol</p></th>
<th class="head"><p>Parameters</p></th>
<th class="head"><p>Bounds</p></th>
<th class="head"><p>Units</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Resistor</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">R</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">R</span></code></p></td>
<td><p>(1e-6, 1e6)</p></td>
<td><p>Ω</p></td>
</tr>
<tr class="row-odd"><td><p>Capacitance</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">C</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">C</span></code></p></td>
<td><p>(1e-20, 1)</p></td>
<td><p>F</p></td>
</tr>
<tr class="row-even"><td rowspan="2"><p>Constant Phase Element</p></td>
<td rowspan="2"><p><code class="docutils literal notranslate"><span class="pre">CPE</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">CPE_Q</span></code></p></td>
<td><p>(1e-20, 1)</p></td>
<td><p>Ω⁻¹sᵃ</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CPE_a</span></code></p></td>
<td><p>(0, 1)</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>Warburg element</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">W</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">W</span></code></p></td>
<td><p>(0, 1e10)</p></td>
<td><p>Ω⁻¹s¹ᐟ²</p></td>
</tr>
<tr class="row-odd"><td rowspan="2"><p>Warburg short element</p></td>
<td rowspan="2"><p><code class="docutils literal notranslate"><span class="pre">Ws</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Ws_R</span></code></p></td>
<td><p>(0, 1e10)</p></td>
<td><p>Ω</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Ws_T</span></code></p></td>
<td><p>(1e-10, 1e10)</p></td>
<td><p>s</p></td>
</tr>
<tr class="row-odd"><td rowspan="2"><p>Warburg open element</p></td>
<td rowspan="2"><p><code class="docutils literal notranslate"><span class="pre">Wo</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Wo_R</span></code></p></td>
<td><p>(0, 1e10)</p></td>
<td><p>Ω</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Wo_T</span></code></p></td>
<td><p>(1e-10, 1e10)</p></td>
<td><p>s</p></td>
</tr>
</tbody>
</table>
<p>Additionally an initial guess for the fitting parameters is needed. The initial
guess is given as a <code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code> where each key is the parameter name and the
corresponding value is the initial value for the circuit.</p>
<p>The bounds of each parameter can be customized by the <code class="docutils literal notranslate"><span class="pre">fit_bounds</span></code> parameter.
This parameter is a <code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>, where each key is the parameter name and the
value consists of a <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code> for the lower and upper bound (lb, ub).</p>
<p>To hold a parameter constant, add the name of the parameter to a <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>
and pass it as <code class="docutils literal notranslate"><span class="pre">fit_constants</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>real</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Quantity</span></code>) – A <code class="xref py py-class docutils literal notranslate"><span class="pre">pint.Quantity</span></code> object containing the real part of the impedance data,
<span class="math notranslate nohighlight">\(\text{Re}(Z)\)</span>. The unit of the provided gets converted to ‘Ω’.</p></li>
<li><p><strong>imag</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Quantity</span></code>) – A <code class="xref py py-class docutils literal notranslate"><span class="pre">pint.Quantity</span></code> object containing the imaginary part of the impedance
data, <span class="math notranslate nohighlight">\(-\text{Im}(Z)\)</span>. The unit of the provided gets converted to ‘Ω’.</p></li>
<li><p><strong>freq</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Quantity</span></code>) – A <code class="xref py py-class docutils literal notranslate"><span class="pre">pint.Quantity</span></code> object containing the frequency <span class="math notranslate nohighlight">\(f\)</span> of the
impedance data. The unit of the provided data should gets converted to ‘Hz’.</p></li>
<li><p><strong>circuit</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – A <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code> description of the equivalent circuit.</p></li>
<li><p><strong>initial_values</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]) – A <code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code> with the initial (guess) values.
Structure: {“param name”: value, … }</p></li>
<li><p><strong>output</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – A <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code> prefix</p></li>
<li><p><strong>fit_bounds</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]]]) – Custom bounds for a parameter if default bounds are not wanted
Structure: {“param name”: (lower bound, upper bound), …}
Default is ‘’None’’</p></li>
<li><p><strong>fit_constants</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – list of parameters which should stay constant during fitting
Structure: [“param name”, …]
Default is ‘’None’’</p></li>
<li><p><strong>ignore_neg_res</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – ignores impedance values with a negative real part</p></li>
<li><p><strong>upper_freq</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – upper frequency bound to be considered for fitting</p></li>
<li><p><strong>lower_freq</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – lower frequency bound to be considered for fitting</p></li>
<li><p><strong>repeat</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – how many times <code class="docutils literal notranslate"><span class="pre">fit_routine</span></code> gets called</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>A tuple containing two dicts.</dt><dd><ul class="simple">
<li><p>parameters, contains all the values of the parameters accessible by their names</p></li>
<li><p>units, contains all the units of the parameters accessible by their names</p></li>
</ul>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(parameters, units)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dgpost.transform.impedance.calc_circuit">
<span class="sig-prename descclassname"><span class="pre">dgpost.transform.impedance.</span></span><span class="sig-name descname"><span class="pre">calc_circuit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">freq</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">circuit</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameters</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'calc_circuit'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dgpost.transform.impedance.calc_circuit" title="Permalink to this definition"></a></dt>
<dd><p>Calculates the complex impedance <span class="math notranslate nohighlight">\(\text{Re}(Z)\)</span> and <span class="math notranslate nohighlight">\(-\text{Im}(Z)\)</span>
of the prescribed equivalent circuit as a function of frequency <span class="math notranslate nohighlight">\(f\)</span>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>freq</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Quantity</span></code>) – A <code class="xref py py-class docutils literal notranslate"><span class="pre">pint.Quantity</span></code> containing the frequencies <span class="math notranslate nohighlight">\(f\)</span> at which the
equivalent circuit is to be evaluated. The provided data should be in “Hz”.</p></li>
<li><p><strong>circuit</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – A <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code> description of the equivalent circuit. For more details see
<a class="reference internal" href="#dgpost.transform.impedance.fit_circuit" title="dgpost.transform.impedance.fit_circuit"><code class="xref py py-func docutils literal notranslate"><span class="pre">fit_circuit()</span></code></a>.</p></li>
<li><p><strong>parameters</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]) – A <code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code> containing the values defining the equivalent circuit.
Structure: {“param name”: value, … }</p></li>
<li><p><strong>output</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – A <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code> prefix for the <code class="docutils literal notranslate"><span class="pre">Re(Z)</span></code> and <code class="docutils literal notranslate"><span class="pre">-Im(Z)</span></code> values calculated
in this function. Defaults to <code class="docutils literal notranslate"><span class="pre">&quot;calc_circuit&quot;</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>retvals</strong> – A dictionary containing the <code class="xref py py-class docutils literal notranslate"><span class="pre">pint.Quantity</span></code> arrays with the
output-prefixed <span class="math notranslate nohighlight">\(\text{Re}(Z)\)</span> and <span class="math notranslate nohighlight">\(-\text{Im}(Z)\)</span> as keys.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict[str, pint.Quantity]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dgpost.transform.impedance.lowest_real_impedance">
<span class="sig-prename descclassname"><span class="pre">dgpost.transform.impedance.</span></span><span class="sig-name descname"><span class="pre">lowest_real_impedance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">real</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'min</span> <span class="pre">Re(Z)'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dgpost.transform.impedance.lowest_real_impedance" title="Permalink to this definition"></a></dt>
<dd><p>A function that finds and interpolates the lowest <span class="math notranslate nohighlight">\(\text{Re}(Z)\)</span> value
at which the complex impedance <span class="math notranslate nohighlight">\(Z = \text{Re}(Z) - j \text{Im}(Z)\)</span> is a
real number (i.e. <span class="math notranslate nohighlight">\(\text{Im}(Z) \approx 0\)</span>). If the impedance does not
cross the real-zero axis, the <span class="math notranslate nohighlight">\(\text{Re}(Z)\)</span> at which the
<span class="math notranslate nohighlight">\(\text{abs}(\text{Im}(Z))\)</span> is the smallest is returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>real</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Quantity</span></code>) – A <code class="xref py py-class docutils literal notranslate"><span class="pre">pint.Quantity</span></code> object containing the real part of the impedance data,
<span class="math notranslate nohighlight">\(\text{Re}(Z)\)</span>. The units of <code class="docutils literal notranslate"><span class="pre">real</span></code> and <code class="docutils literal notranslate"><span class="pre">imag</span></code> are assumed to match.</p></li>
<li><p><strong>imag</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Quantity</span></code>) – A <code class="xref py py-class docutils literal notranslate"><span class="pre">pint.Quantity</span></code> object containing the imaginary part of the impedance
data, <span class="math notranslate nohighlight">\(-\text{Im}(Z)\)</span>. The units of <code class="docutils literal notranslate"><span class="pre">real</span></code> and <code class="docutils literal notranslate"><span class="pre">imag</span></code> are assumed to
match.</p></li>
<li><p><strong>output</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – A <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code> name for the output column, defaults to <code class="docutils literal notranslate"><span class="pre">&quot;min</span> <span class="pre">Re(Z)&quot;</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>retvals</strong> – A dictionary containing the <code class="xref py py-class docutils literal notranslate"><span class="pre">pint.Quantity</span></code> values of the real impedances
with the output as keys.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict[str, pint.Quantity]</p>
</dd>
</dl>
</dd></dl>

</section>
<span class="target" id="module-dgpost.transform.rates"></span><section id="rates-determining-molar-rates-of-chemical-species">
<h2><strong>rates</strong>: determining molar rates of chemical species<a class="headerlink" href="#rates-determining-molar-rates-of-chemical-species" title="Permalink to this headline"></a></h2>
<p><em>Code author: Peter Kraus</em></p>
<p>Includes functions to convert mixture compositions (concentration, mol fraction)
from instantaneous flow data or continuous batch data to rates (dimension of
<code class="docutils literal notranslate"><span class="pre">[quantity]/[time]</span></code>). The <a class="reference internal" href="#dgpost.transform.rates.flow_to_molar" title="dgpost.transform.rates.flow_to_molar"><code class="xref py py-func docutils literal notranslate"><span class="pre">flow_to_molar()</span></code></a> function
is useful for converting gas-phase or liquid flows, while
<a class="reference internal" href="#dgpost.transform.rates.batch_to_molar" title="dgpost.transform.rates.batch_to_molar"><code class="xref py py-func docutils literal notranslate"><span class="pre">batch_to_molar()</span></code></a> can be used to determine formation
rates from the concentration profile of a batch mixture.</p>
<dl class="py function">
<dt class="sig sig-object py" id="dgpost.transform.rates.flow_to_molar">
<span class="sig-prename descclassname"><span class="pre">dgpost.transform.rates.</span></span><span class="sig-name descname"><span class="pre">flow_to_molar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">flow</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">c=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Tref=&lt;Quantity(273.15</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'kelvin')&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pref=&lt;Quantity(1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'standard_atmosphere')&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output='rate'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dgpost.transform.rates.flow_to_molar" title="Permalink to this definition"></a></dt>
<dd><p>Calculates a molar rate of species from specified flow and composition. The
units of the rate have to be either dimensionless (for unit-naive dataframes) or
in dimensions of [substance]/[time].</p>
<p>Currently, three combinations of units are supported:</p>
<blockquote>
<div><ul>
<li><p>Dimensionless <code class="docutils literal notranslate"><span class="pre">flow</span></code> and dimensionless <code class="docutils literal notranslate"><span class="pre">comp</span></code>, as is the case for unit-naive
dataframes. In this case, the molar flow rates of species <span class="math notranslate nohighlight">\(r_s\)</span> are
calculated by a simple multiplication:</p>
<div class="math notranslate nohighlight">
\[r_s = \text{flow} \times \text{comp}_s\]</div>
</li>
<li><p>Volumetric <code class="docutils literal notranslate"><span class="pre">flow</span></code> <span class="math notranslate nohighlight">\(\dot{V}\)</span> and composition <code class="docutils literal notranslate"><span class="pre">comp</span></code> as a concentration,
as is often the case in liquid flows. In this case, the molar rates of species
<span class="math notranslate nohighlight">\(r_s\)</span> are also a simple multiplication (accounting for unit conversion):</p>
<div class="math notranslate nohighlight">
\[r_s = \dot{V} \times c_s\]</div>
</li>
<li><p>Volumetric <code class="docutils literal notranslate"><span class="pre">flow</span></code> <span class="math notranslate nohighlight">\(\dot{V}\)</span> and composition <code class="docutils literal notranslate"><span class="pre">comp</span></code> as a dimensionless
molar fraction <span class="math notranslate nohighlight">\(x_s\)</span>, in which case the flow is assumed to be gas-phase. In
this case, the flow has to be converted to molar units using the ideal gas law:</p>
<div class="math notranslate nohighlight">
\[r_s = \dot{V} \times \frac{p_\text{ref}}{RT_\text{ref}} \times x_s\]</div>
<p>The pressure <span class="math notranslate nohighlight">\(p_\text{ref}\)</span> and temperature <span class="math notranslate nohighlight">\(T_\text{ref}\)</span> are
specifying the state at which the flow <span class="math notranslate nohighlight">\(\dot{V}\)</span> has been measured.</p>
</li>
</ul>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>flow</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Quantity</span></code>) – The total flow of the mixture.</p></li>
<li><p><strong>c</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Quantity</span></code>]]) – A dictionary containing the composition of the mixture as concentration.
Cannot be supplied at the same time as <code class="docutils literal notranslate"><span class="pre">x</span></code>.</p></li>
<li><p><strong>x</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Quantity</span></code>]]) – A dictionary containing the composition of the mixture as mole fraction.
Assuming ideal gas-phase flow. Cannot be supplied at the same time as <code class="docutils literal notranslate"><span class="pre">c</span></code>.</p></li>
<li><p><strong>Tref</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Quantity</span></code>) – Reference temperature of the flow measurement, used when composition is
specified using a mol fraction. By default set to 273.15 K.</p></li>
<li><p><strong>pref</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Quantity</span></code>) – Reference pressure of the flow measurement, used when composition is
specified using a mol fraction. By default set to 1 atm.</p></li>
<li><p><strong>output</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Prefix of the keys of the returned rate dictionary.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Quantity</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dgpost.transform.rates.batch_to_molar">
<span class="sig-prename descclassname"><span class="pre">dgpost.transform.rates.</span></span><span class="sig-name descname"><span class="pre">batch_to_molar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">c</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">V</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'rate'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dgpost.transform.rates.batch_to_molar" title="Permalink to this definition"></a></dt>
<dd><p>Calculates a molar rate of species from specified volume and composition at
the specified timesteps. The units of the rate have to be either dimensionless
(for unit-naive dataframes) or in dimensions of [substance]/[time].</p>
<p>First, the <span class="math notranslate nohighlight">\(\delta t\)</span> and <span class="math notranslate nohighlight">\(\delta c(x)\)</span> at each timestep <span class="math notranslate nohighlight">\(n\)</span> is
calculated:</p>
<div class="math notranslate nohighlight">
\[\delta t_n = t_n - t_{n-1}
\delta c(x)_n = c(x)_n - c(x)_{n-1}\]</div>
<p>Then, the formation rate is calculated using the volume:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>time</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Quantity</span></code>) – An array of timestamps at which the concentrations and volumes are measured.</p></li>
<li><p><strong>c</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Quantity</span></code>]) – A dictionary containing concentrations of species at the specified timestamps.</p></li>
<li><p><strong>V</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Quantity</span></code>) – Volume of the batch at the timestamps.</p></li>
<li><p><strong>t0</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Quantity</span></code>]) – An optional timestamp representing the initial time where all concentrations
are zero. If not supplied, the calculation will use the first datapoint as
reference with its rates set to zero.</p></li>
<li><p><strong>output</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Prefix of the columns where the calculated rate will be stored.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Quantity</span></code>]</p>
</dd>
</dl>
</dd></dl>

</section>
<span class="target" id="module-dgpost.transform.namespace"></span><section id="namespace-utilities-for-combining-namespaces">
<h2><strong>namespace</strong>: utilities for combining namespaces<a class="headerlink" href="#namespace-utilities-for-combining-namespaces" title="Permalink to this headline"></a></h2>
<p>Provides a convenience function <a class="reference internal" href="#dgpost.transform.namespace.combine" title="dgpost.transform.namespace.combine"><code class="xref py py-func docutils literal notranslate"><span class="pre">combine()</span></code></a> which
can be used to combine <code class="docutils literal notranslate"><span class="pre">-&gt;</span></code> separated namespaces of values or chemicals into a
single namespace.</p>
<p><em>Code author: Peter Kraus</em></p>
<dl class="py function">
<dt class="sig sig-object py" id="dgpost.transform.namespace.combine">
<span class="sig-prename descclassname"><span class="pre">dgpost.transform.namespace.</span></span><span class="sig-name descname"><span class="pre">combine</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">conflicts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'sum'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'c'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chemicals</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dgpost.transform.namespace.combine" title="Permalink to this definition"></a></dt>
<dd><p>Combines two namespaces into one. Unit checks are performed, with the resulting
units corresponding to the units in namespace <code class="docutils literal notranslate"><span class="pre">a</span></code>. By default, the output
namespace is called <code class="docutils literal notranslate"><span class="pre">&quot;c&quot;</span></code>. Optionally, the keys in each namespace can be treated
as chemicals.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Quantity</span></code>]) – Namespace <code class="docutils literal notranslate"><span class="pre">a</span></code>.</p></li>
<li><p><strong>b</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Quantity</span></code>]) – Namespace <code class="docutils literal notranslate"><span class="pre">b</span></code>.</p></li>
<li><p><strong>conflicts</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Name resolution scheme. Can be either <code class="docutils literal notranslate"><span class="pre">&quot;sum&quot;</span></code> where conflicts are summed,
or <code class="docutils literal notranslate"><span class="pre">&quot;replace&quot;</span></code>, where conflicting values in <code class="docutils literal notranslate"><span class="pre">a</span></code> are overwritten by <code class="docutils literal notranslate"><span class="pre">b</span></code>.</p></li>
<li><p><strong>chemicals</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – Treat keys within <code class="docutils literal notranslate"><span class="pre">a</span></code> and <code class="docutils literal notranslate"><span class="pre">b</span></code> as chemicals, and combine them accordingly.
Default is <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
<li><p><strong>output</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Namespace of the returned dictionary. By default <code class="docutils literal notranslate"><span class="pre">&quot;c&quot;</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Quantity</span></code>]</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this headline"></a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="dgpost.transform.circuit_utils.html">dgpost.transform.circuit_utils package</a></li>
</ul>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="dgpost.html" class="btn btn-neutral float-left" title="dgpost autodocs" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="dgpost.transform.circuit_utils.html" class="btn btn-neutral float-right" title="dgpost.transform.circuit_utils package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021-2022, dgpost authors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Other Versions</span>
      v: 
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions"> 
      <script src="../versions.js"></script>
    </div>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>