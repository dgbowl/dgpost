<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>dgpost.transform package &mdash; dgpost  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="dgpost.transform.circuit_utils package" href="dgpost.transform.circuit_utils.html" />
    <link rel="prev" title="dgpost package" href="dgpost.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> dgpost
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="dgpost.html">dgpost package</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="dgpost.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">dgpost.transform package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#subpackages">Subpackages</a></li>
<li class="toctree-l4"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-dgpost.transform.catalysis">dgpost.transform.catalysis module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-dgpost.transform.helpers">dgpost.transform.helpers module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-dgpost.transform.impedance">dgpost.transform.impedance module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-dgpost.transform.rates">dgpost.transform.rates module</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="dgpost.utils.html">dgpost.utils package</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="dgpost.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="dgpost.html#module-dgpost.main">dgpost.main module</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">dgpost</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="dgpost.html">dgpost package</a> &raquo;</li>
      <li>dgpost.transform package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/dgpost.transform.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-dgpost.transform">
<span id="dgpost-transform-package"></span><h1>dgpost.transform package<a class="headerlink" href="#module-dgpost.transform" title="Permalink to this headline"></a></h1>
<section id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this headline"></a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="dgpost.transform.circuit_utils.html">dgpost.transform.circuit_utils package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="dgpost.transform.circuit_utils.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="dgpost.transform.circuit_utils.html#module-dgpost.transform.circuit_utils.circuit_components">dgpost.transform.circuit_utils.circuit_components module</a></li>
<li class="toctree-l2"><a class="reference internal" href="dgpost.transform.circuit_utils.html#module-dgpost.transform.circuit_utils.circuit_parser">dgpost.transform.circuit_utils.circuit_parser module</a></li>
</ul>
</li>
</ul>
</div>
</section>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline"></a></h2>
</section>
<section id="module-dgpost.transform.catalysis">
<span id="dgpost-transform-catalysis-module"></span><h2>dgpost.transform.catalysis module<a class="headerlink" href="#module-dgpost.transform.catalysis" title="Permalink to this headline"></a></h2>
<p>Module of transformations relevant to catalysis applications.</p>
<p>For all user-facing function in this module, the data is extracted from the
<code class="xref py py-class docutils literal notranslate"><span class="pre">pd.DataFrame</span></code> supplied as <code class="docutils literal notranslate"><span class="pre">df</span></code>. The inlet and outlet compositions are
specified using <code class="docutils literal notranslate"><span class="pre">xin</span></code> and <code class="docutils literal notranslate"><span class="pre">xout</span></code>, and they are taken to be all columns in <code class="docutils literal notranslate"><span class="pre">df</span></code>
matching the format <code class="docutils literal notranslate"><span class="pre">{xin|xout}-&gt;*</span></code>. The <code class="docutils literal notranslate"><span class="pre">*</span></code> denotes species names, which are
parsed to SMILES. Matching of <code class="docutils literal notranslate"><span class="pre">feestock</span></code>, <code class="docutils literal notranslate"><span class="pre">standard</span></code>, and components of <code class="docutils literal notranslate"><span class="pre">xin</span></code>
and <code class="docutils literal notranslate"><span class="pre">xout</span></code> is performed using these SMILES.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This module assumes that the provided inlet (<code class="docutils literal notranslate"><span class="pre">xin</span></code>) and outlet (<code class="docutils literal notranslate"><span class="pre">xout</span></code>)
compositions contains all species, and that the atomic balance of the inlet and
outlet is near unity. If multiple inlet/outlet streams are present in the
experiment, they need to be appropriately combined into a single <code class="docutils literal notranslate"><span class="pre">xin</span></code>/<code class="docutils literal notranslate"><span class="pre">xout</span></code>
using functions in the <code class="xref py py-mod docutils literal notranslate"><span class="pre">dgpost.transform.mixture</span></code> before using the functions
in this module.</p>
</div>
<dl class="py function">
<dt class="sig sig-object py" id="dgpost.transform.catalysis.atom_balance">
<span class="sig-prename descclassname"><span class="pre">dgpost.transform.catalysis.</span></span><span class="sig-name descname"><span class="pre">atom_balance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'xin'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'xout'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">element</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'C'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">standard</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'N2'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dgpost.transform.catalysis.atom_balance" title="Permalink to this definition"></a></dt>
<dd><p>Calculates atom balance. The total number of atoms of the specified element is
compared between between the inlet and outlet, normalized by an internal standard,
or optionally weighed by the supplied flows.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>) – A pandas dataframe.</p></li>
<li><p><strong>xin</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Prefix of the columns determining the inlet composition.</p></li>
<li><p><strong>xout</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Prefix of the columns determining the outlet composition.</p></li>
<li><p><strong>element</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – The element for determining conversion. If not specified, set to <code class="docutils literal notranslate"><span class="pre">&quot;C&quot;</span></code>.</p></li>
<li><p><strong>standard</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Internal standard for normalizing flows. By default set to <code class="docutils literal notranslate"><span class="pre">&quot;N2&quot;</span></code>.
Overriden when <code class="docutils literal notranslate"><span class="pre">fin</span></code> and <code class="docutils literal notranslate"><span class="pre">fout</span></code> are set.</p></li>
<li><p><strong>fin</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – Inlet flow. If not supplied, assumed to be equal to outlet flow.</p></li>
<li><p><strong>fout</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – Outlet flow. If not supplied, assumed to be equal to inlet flow.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dgpost.transform.catalysis.catalytic_yield">
<span class="sig-prename descclassname"><span class="pre">dgpost.transform.catalysis.</span></span><span class="sig-name descname"><span class="pre">catalytic_yield</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feedstock</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'xin'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'xout'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">element</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">standard</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'N2'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dgpost.transform.catalysis.catalytic_yield" title="Permalink to this definition"></a></dt>
<dd><p>Calculates the catalytic yield, defined as the product of conversion and
selectivity. Uses product-based conversion of feedstock for consistency with
selectivity. The sum of all yields is equal to the conversion. Implicitly runs
<a class="reference internal" href="#dgpost.transform.catalysis.conversion" title="dgpost.transform.catalysis.conversion"><code class="xref py py-func docutils literal notranslate"><span class="pre">conversion()</span></code></a> and <a class="reference internal" href="#dgpost.transform.catalysis.selectivity" title="dgpost.transform.catalysis.selectivity"><code class="xref py py-func docutils literal notranslate"><span class="pre">selectivity()</span></code></a> on the dataframe.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>) – A pandas dataframe.</p></li>
<li><p><strong>feedstock</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Name of the feedstock. Parsed into SMILES and matched against <code class="docutils literal notranslate"><span class="pre">xin</span></code> and
<code class="docutils literal notranslate"><span class="pre">xout</span></code>.</p></li>
<li><p><strong>xin</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Prefix of the columns determining the inlet composition.</p></li>
<li><p><strong>xout</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Prefix of the columns determining the outlet composition.</p></li>
<li><p><strong>element</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – The element for determining conversion. If not specified, set from <code class="docutils literal notranslate"><span class="pre">feedstock</span></code>
using <code class="xref py py-func docutils literal notranslate"><span class="pre">dgpost.transform.chemhelpers.default_element()</span></code>.</p></li>
<li><p><strong>standard</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Internal standard for normalizing flows. By default set to <code class="docutils literal notranslate"><span class="pre">&quot;N2&quot;</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dgpost.transform.catalysis.conversion">
<span class="sig-prename descclassname"><span class="pre">dgpost.transform.catalysis.</span></span><span class="sig-name descname"><span class="pre">conversion</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feedstock</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'xin'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'xout'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">element</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">product</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">standard</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'N2'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dgpost.transform.catalysis.conversion" title="Permalink to this definition"></a></dt>
<dd><p>Calculates the conversion of <code class="docutils literal notranslate"><span class="pre">feedstock</span></code>, a species present in <code class="docutils literal notranslate"><span class="pre">xin</span></code>. By
default, a product-based carbon conversion (using data from <code class="docutils literal notranslate"><span class="pre">xout</span></code>) is computed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>) – A pandas dataframe.</p></li>
<li><p><strong>feedstock</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Name of the feedstock. Parsed into SMILES and matched against <code class="docutils literal notranslate"><span class="pre">xin</span></code> and
<code class="docutils literal notranslate"><span class="pre">xout</span></code>.</p></li>
<li><p><strong>xin</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Prefix of the columns determining the inlet composition.</p></li>
<li><p><strong>xout</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Prefix of the columns determining the outlet composition.</p></li>
<li><p><strong>element</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – Name of the element for determining conversion. If not specified, set to the
highest-priority element in <code class="docutils literal notranslate"><span class="pre">feedstock</span></code>: “C” &gt; “O” &gt; “H” &gt; …</p></li>
<li><p><strong>product</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – Product-based conversion toggle. Default is <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
<li><p><strong>standard</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Internal standard for normalizing flows. By default set to “N2”.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dgpost.transform.catalysis.selectivity">
<span class="sig-prename descclassname"><span class="pre">dgpost.transform.catalysis.</span></span><span class="sig-name descname"><span class="pre">selectivity</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feedstock</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'xin'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'xout'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">element</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dgpost.transform.catalysis.selectivity" title="Permalink to this definition"></a></dt>
<dd><p>Calculates product-based elemental selectivities, excluding the feedstock. The sum
of selectivities is normalised to unity.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>) – A pandas dataframe.</p></li>
<li><p><strong>feedstock</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Name of the feedstock. Parsed into SMILES and matched against <code class="docutils literal notranslate"><span class="pre">xin</span></code> and
<code class="docutils literal notranslate"><span class="pre">xout</span></code>.</p></li>
<li><p><strong>xin</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Prefix of the columns determining the inlet composition.</p></li>
<li><p><strong>xout</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Prefix of the columns determining the outlet composition.</p></li>
<li><p><strong>element</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – The element for determining conversion. If not specified, set from <code class="docutils literal notranslate"><span class="pre">feedstock</span></code>
using <code class="xref py py-func docutils literal notranslate"><span class="pre">dgpost.transform.chemhelpers.default_element()</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-dgpost.transform.helpers">
<span id="dgpost-transform-helpers-module"></span><h2>dgpost.transform.helpers module<a class="headerlink" href="#module-dgpost.transform.helpers" title="Permalink to this headline"></a></h2>
<p>Module of helper functions for chemicals, elements, and unit handling.</p>
<dl class="py function">
<dt class="sig sig-object py" id="dgpost.transform.helpers.columns_to_smiles">
<span class="sig-prename descclassname"><span class="pre">dgpost.transform.helpers.</span></span><span class="sig-name descname"><span class="pre">columns_to_smiles</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dgpost.transform.helpers.columns_to_smiles" title="Permalink to this definition"></a></dt>
<dd><p>Creates a dictionary with SMILES representation of all chemicals, in the dataframe
matched by the prefix, storing the returned <code class="xref py py-class docutils literal notranslate"><span class="pre">chemicals.ChemicalMetadata</span></code> as
well as the full name of the column.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>) – Source dataframe.</p></li>
<li><p><strong>prefix</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]) – Prefix of chemical species, with species names separated by  <code class="docutils literal notranslate"><span class="pre">-&gt;</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A new dictionary containing the SMILES of all prefixed chemicals as keys,
and the metadata and column specification as values.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dgpost.transform.helpers.default_element">
<span class="sig-prename descclassname"><span class="pre">dgpost.transform.helpers.</span></span><span class="sig-name descname"><span class="pre">default_element</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dgpost.transform.helpers.default_element" title="Permalink to this definition"></a></dt>
<dd><p>Given a formula <code class="docutils literal notranslate"><span class="pre">f</span></code>, return the default element for conversion. Priority is:
<code class="docutils literal notranslate"><span class="pre">&quot;C&quot;</span> <span class="pre">&gt;</span> <span class="pre">&quot;O&quot;</span> <span class="pre">&gt;</span> <span class="pre">&quot;H&quot;</span> <span class="pre">&gt;</span> <span class="pre">...</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dgpost.transform.helpers.element_from_formula">
<span class="sig-prename descclassname"><span class="pre">dgpost.transform.helpers.</span></span><span class="sig-name descname"><span class="pre">element_from_formula</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">el</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dgpost.transform.helpers.element_from_formula" title="Permalink to this definition"></a></dt>
<dd><p>Given a formula <code class="docutils literal notranslate"><span class="pre">f</span></code>, return the number of atoms of element <code class="docutils literal notranslate"><span class="pre">el</span></code> in that formula.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dgpost.transform.helpers.pQ">
<span class="sig-prename descclassname"><span class="pre">dgpost.transform.helpers.</span></span><span class="sig-name descname"><span class="pre">pQ</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dgpost.transform.helpers.pQ" title="Permalink to this definition"></a></dt>
<dd><p>Unit-aware dataframe accessor function.</p>
<p>Given a dataframe in <code class="docutils literal notranslate"><span class="pre">df</span></code> and a column name in <code class="docutils literal notranslate"><span class="pre">col</span></code>, the function looks
through the units stored in <code class="docutils literal notranslate"><span class="pre">df.attrs[&quot;units&quot;]</span></code> and returns a unit-annotated
<code class="xref py py-class docutils literal notranslate"><span class="pre">pint.Quantity</span></code> containing the column data.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If <code class="docutils literal notranslate"><span class="pre">df.attrs</span></code> has no units, or <code class="docutils literal notranslate"><span class="pre">col</span></code> is not in <code class="docutils literal notranslate"><span class="pre">df.attrs[&quot;units&quot;]</span></code>,
the returned <code class="xref py py-class docutils literal notranslate"><span class="pre">pint.Quantity</span></code> is dimensionless.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>) – Pandas dataframe, optionally annotated with units.</p></li>
<li><p><strong>col</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Column from the dataframe.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Unit-aware numpy-like object containing the data from <code class="docutils literal notranslate"><span class="pre">df[col]</span></code>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">pint.Quantity</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dgpost.transform.helpers.save">
<span class="sig-prename descclassname"><span class="pre">dgpost.transform.helpers.</span></span><span class="sig-name descname"><span class="pre">save</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">col</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dgpost.transform.helpers.save" title="Permalink to this definition"></a></dt>
<dd><p>Unit aware dataframe storing function.</p>
<p>Given a dataframe in <code class="docutils literal notranslate"><span class="pre">df</span></code>, and the new column header in <code class="docutils literal notranslate"><span class="pre">tag</span></code> and the data
in <code class="docutils literal notranslate"><span class="pre">col</span></code>, this function stores the data portion of <code class="docutils literal notranslate"><span class="pre">col</span></code> in the dataframe
as <code class="docutils literal notranslate"><span class="pre">df[tag]</span></code>, and annotates the dataframe with the units.</p>
<p>If the units of <code class="docutils literal notranslate"><span class="pre">col</span></code> are dimensionless, the unit is not stored.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>) – Pandas dataframe, optionally annotated with units.</p></li>
<li><p><strong>tag</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Name of the new column.</p></li>
<li><p><strong>col</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Quantity</span></code>) – Data of the new column.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-dgpost.transform.impedance">
<span id="dgpost-transform-impedance-module"></span><h2>dgpost.transform.impedance module<a class="headerlink" href="#module-dgpost.transform.impedance" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="dgpost.transform.impedance.calc_circuit">
<span class="sig-prename descclassname"><span class="pre">dgpost.transform.impedance.</span></span><span class="sig-name descname"><span class="pre">calc_circuit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">circuit</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameters</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">freq</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dgpost.transform.impedance.calc_circuit" title="Permalink to this definition"></a></dt>
<dd><p>Calculate and adds the impedance as columns to the given dataframe for the given parameters, frequency and circuit.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>circuit</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – string describing the circuit. For more info see impedance.fit_circuit</p></li>
<li><p><strong>parameters</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]) – dictionary with initial values
Structure: {“param name”: value, … }</p></li>
<li><p><strong>output</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – the name of the output</p></li>
<li><p><strong>freq</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Quantity</span></code>]) – numpy.ndarray or pint.Quantity of a numpy.ndarray containing the frequency
The provided data should be in the unit of “Hz”</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>A tuple containing two dicts.</dt><dd><ul class="simple">
<li><p>values, containing the two lists of the real and the negative imaginary part of the impedance ce</p></li>
<li><p>units, contains the corresponding units of the impedance</p></li>
</ul>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(parameters, units)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dgpost.transform.impedance.fit_circuit">
<span class="sig-prename descclassname"><span class="pre">dgpost.transform.impedance.</span></span><span class="sig-name descname"><span class="pre">fit_circuit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">real</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">freq</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">circuit</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">initial_values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fit_bounds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fit_constants</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ignore_neg_res</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">upper_freq</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">inf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lower_freq</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">repeat</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dgpost.transform.impedance.fit_circuit" title="Permalink to this definition"></a></dt>
<dd><p>Fitting function for equivalent circuits of electrochemical impedance spectroscopy (EIS) data.</p>
<p>For the fitting an equivalent circuit is needed, defined as a string. The circuit may be composed of multiple elements.
To combine elements in series a dash (-) is used. Elements in parallel are wrapped by p( , ).
An element is defined by an identifier (usually letters) followed by a digit.
Already implemented elements are located in <code class="xref py py-class docutils literal notranslate"><span class="pre">circuit_components</span></code>:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 11%" />
<col style="width: 16%" />
<col style="width: 21%" />
<col style="width: 19%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Name</p></td>
<td><p>Symbol</p></td>
<td><p>Parameters</p></td>
<td><p>Bounds</p></td>
<td><p>Units</p></td>
</tr>
<tr class="row-even"><td><p>Resistor</p></td>
<td><p>R</p></td>
<td><p>R</p></td>
<td><p>(1e-6, 1e6)</p></td>
<td><p>Ohm</p></td>
</tr>
<tr class="row-odd"><td><p>Capacitance</p></td>
<td><p>C</p></td>
<td><p>C</p></td>
<td><p>(1e-20, 1)</p></td>
<td><p>Farad</p></td>
</tr>
<tr class="row-even"><td rowspan="2"><p>Constant Phase Element</p></td>
<td rowspan="2"><p>CPE</p></td>
<td><p>CPE_Q</p></td>
<td><p>(1e-20, 1)</p></td>
<td><p>Ohm^-1 s^a</p></td>
</tr>
<tr class="row-odd"><td><p>CPE_a</p></td>
<td><p>(0, 1)</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>Warburg element</p></td>
<td><p>W</p></td>
<td><p>W</p></td>
<td><p>(0, 1e10)</p></td>
<td><p>Ohm^-1 s^0.5</p></td>
</tr>
<tr class="row-odd"><td rowspan="2"><p>Warburg short element</p></td>
<td rowspan="2"><p>Ws</p></td>
<td><p>Ws_R</p></td>
<td><p>(0, 1e10)</p></td>
<td><p>Ohm</p></td>
</tr>
<tr class="row-even"><td><p>Ws_T</p></td>
<td><p>(1e-10, 1e10)</p></td>
<td><p>s</p></td>
</tr>
<tr class="row-odd"><td rowspan="2"><p>Warburg open element</p></td>
<td rowspan="2"><p>Wo</p></td>
<td><p>Wo_R</p></td>
<td><p>(0, 1e10)</p></td>
<td><p>Ohm</p></td>
</tr>
<tr class="row-even"><td><p>Wo_T</p></td>
<td><p>(1e-10, 1e10)</p></td>
<td><p>s</p></td>
</tr>
</tbody>
</table>
<p>Additionally an initial guess for the fitting parameters is needed.
The initial guess is given as a dictionary where each key is the parameters name and
the corresponding value is the guessed value for the circuit.</p>
<p>The bounds of each parameter can be customized by the <code class="docutils literal notranslate"><span class="pre">fit_bounds</span></code> parameter.
This parameter is a dictionary, where each key is the parameter name and the value consists of a tuple for the lower and upper bound (lb, ub).</p>
<p>To hold a parameter constant, add the name of the parameter to a list and pass it as <code class="docutils literal notranslate"><span class="pre">fit_constants</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>real</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Quantity</span></code>]) – numpy.ndarray or pint.Quantity of a numpy.ndarray containing the real part of the impedance data
The unit of the provided data should be or gets converted to ‘Ω’</p></li>
<li><p><strong>imag</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Quantity</span></code>]) – numpy.ndarray or pint.Quantity of a numpy.ndarray containing the negative imaginary part of the impedance data
The unit of the provided data should be or gets converted to ‘Ω’</p></li>
<li><p><strong>freq</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Quantity</span></code>]) – numpy.ndarray or pint.Quantity of a numpy.ndarray containing the frequency of the impedance data
The unit of the provided data should be or gets converted to ‘Hz’</p></li>
<li><p><strong>circuit</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Equivalent circuit for the fit</p></li>
<li><p><strong>initial_values</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]) – dictionary with initial values
Structure: {“param name”: value, … }</p></li>
<li><p><strong>output</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – the name of the output</p></li>
<li><p><strong>fit_bounds</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]]]) – Custom bounds for a parameter if default bounds are not wanted
Structure: {“param name”: (lower bound, upper bound), …}
Default is ‘’None’’</p></li>
<li><p><strong>fit_constants</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>]]) – list of parameters which should stay constant during fitting
Structure: [“param name”, …]
Default is ‘’None’’</p></li>
<li><p><strong>ignore_neg_res</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – ignores impedance values with a negative real part</p></li>
<li><p><strong>upper_freq</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – upper frequency bound to be considered for fitting</p></li>
<li><p><strong>lower_freq</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>) – lower frequency bound to be considered for fitting</p></li>
<li><p><strong>repeat</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – how many times <code class="docutils literal notranslate"><span class="pre">fit_routine</span></code> gets called</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>A tuple containing two dicts.</dt><dd><ul class="simple">
<li><p>parameters, contains all the values of the parameters accessible by their names</p></li>
<li><p>units, contains all the units of the parameters accessible by their names</p></li>
</ul>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(parameters, units)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dgpost.transform.impedance.fit_routine">
<span class="sig-prename descclassname"><span class="pre">dgpost.transform.impedance.</span></span><span class="sig-name descname"><span class="pre">fit_routine</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">opt_func</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fit_guess</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bounds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">repeat</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dgpost.transform.impedance.fit_routine" title="Permalink to this definition"></a></dt>
<dd><p>Fitting routine which uses scipy least_squares and minimize.</p>
<p>Least_squares is a good fitting method but will get stuck in local minima.
For this reason, the Nelder-Mead-Simplex algorithm is used to get out of these local minima.
The fitting routine is inspired by Relaxis 3 fitting procedure.
More information about it can be found on page 188 of revision 1.25 of Relaxis User Manual.
<a class="reference external" href="https://www.rhd-instruments.de/download/manuals/relaxis_manual.pdf">https://www.rhd-instruments.de/download/manuals/relaxis_manual.pdf</a></p>
<p>Open issue is estimate the errors of the parameters. For further information look:
- <a class="reference external" href="https://github.com/andsor/notebooks/blob/master/src/nelder-mead.md">https://github.com/andsor/notebooks/blob/master/src/nelder-mead.md</a>
- <a class="reference external" href="https://math.stackexchange.com/questions/2447382/nelder-mead-function-fit-error-estimation-via-surface-fit">https://math.stackexchange.com/questions/2447382/nelder-mead-function-fit-error-estimation-via-surface-fit</a>
- <a class="reference external" href="https://stats.stackexchange.com/questions/424073/calculate-the-uncertainty-of-a-mle">https://stats.stackexchange.com/questions/424073/calculate-the-uncertainty-of-a-mle</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>opt_func</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code>[[<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>], <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]) – function that gets minimized</p></li>
<li><p><strong>fit_guess</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>]) – initial guess for minimization</p></li>
<li><p><strong>bounds</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code>]) – bounds of the fitting parameters</p></li>
<li><p><strong>repeat</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – how many times the least squares and minimize step gets repeated</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>opt_result</strong> – the result of the optimization from the last step of Nelder-Mead.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>scipy.optimize.OptimizeResult</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dgpost.transform.impedance.load_data">
<span class="sig-prename descclassname"><span class="pre">dgpost.transform.impedance.</span></span><span class="sig-name descname"><span class="pre">load_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">cols</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dgpost.transform.impedance.load_data" title="Permalink to this definition"></a></dt>
<dd><p>Decorator factory for data loading</p>
<p>Creates a decorator that will load the columns specified in <code class="docutils literal notranslate"><span class="pre">cols</span></code>
and calls the wrapped function for each row entry.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cols</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – list of strings with the col names used to call the function</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="dgpost.transform.impedance.separate_data">
<span class="sig-prename descclassname"><span class="pre">dgpost.transform.impedance.</span></span><span class="sig-name descname"><span class="pre">separate_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unit</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dgpost.transform.impedance.separate_data" title="Permalink to this definition"></a></dt>
<dd><p>Separates the data into values, errors and unit</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Quantity</span></code>]) – List of data points which are either floats or ufloats</p></li>
<li><p><strong>unit</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – converts the input quantity to this unit</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>returns the values with the corresponding errors and the unit of the input array</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(values, errors, old_unit)</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-dgpost.transform.rates">
<span id="dgpost-transform-rates-module"></span><h2>dgpost.transform.rates module<a class="headerlink" href="#module-dgpost.transform.rates" title="Permalink to this headline"></a></h2>
<p>Module of transformations for chemical species rates.</p>
<dl class="py function">
<dt class="sig sig-object py" id="dgpost.transform.rates.flow_to_molar">
<span class="sig-prename descclassname"><span class="pre">dgpost.transform.rates.</span></span><span class="sig-name descname"><span class="pre">flow_to_molar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flow</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">comp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rate</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Tref</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pref</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#dgpost.transform.rates.flow_to_molar" title="Permalink to this definition"></a></dt>
<dd><p>Calculates a molar rate of species from specified flow and composition. The
units of the rate have to be either dimensionless (for unit-naive dataframes) or
in dimensions of [substance]/[time].</p>
<p>Currently, three combinations of units are supported:</p>
<blockquote>
<div><ul>
<li><p>Dimensionless <code class="docutils literal notranslate"><span class="pre">flow</span></code> and dimensionless <code class="docutils literal notranslate"><span class="pre">comp</span></code>, as is the case for unit-naive
dataframes. In this case, the molar flow rates of species <span class="math notranslate nohighlight">\(r_s\)</span> are
calculated by a simple multiplication:</p>
<div class="math notranslate nohighlight">
\[r_s = \text{flow} \times \text{comp}_s\]</div>
</li>
<li><p>Volumetric <code class="docutils literal notranslate"><span class="pre">flow</span></code> <span class="math notranslate nohighlight">\(\dot{V}\)</span> and composition <code class="docutils literal notranslate"><span class="pre">comp</span></code> as a concentration,
as is often the case in liquid flows. In this case, the molar rates of species
<span class="math notranslate nohighlight">\(r_s\)</span> are also a simple multiplication (accounting for unit conversion):</p>
<div class="math notranslate nohighlight">
\[r_s = \dot{V} \times c_s\]</div>
</li>
<li><p>Volumetric <code class="docutils literal notranslate"><span class="pre">flow</span></code> <span class="math notranslate nohighlight">\(\dot{V}\)</span> and composition <code class="docutils literal notranslate"><span class="pre">comp</span></code> as a dimensionless
molar fraction <span class="math notranslate nohighlight">\(x_s\)</span>, in which case the flow is assumed to be gas-phase. In
this case, the flow has to be converted to molar units using the ideal gas law:</p>
<div class="math notranslate nohighlight">
\[r_s = \dot{V} \times \frac{p_\text{ref}}{RT_\text{ref}} \times x_s\]</div>
<p>The pressure <span class="math notranslate nohighlight">\(p_\text{ref}\)</span> and temperature <span class="math notranslate nohighlight">\(T_\text{ref}\)</span> are
specifying the state at which the flow <span class="math notranslate nohighlight">\(\dot{V}\)</span> has been measured.</p>
</li>
</ul>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code>) – A pandas dataframe.</p></li>
<li><p><strong>flow</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Column containing the total flow.</p></li>
<li><p><strong>comp</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Prefix of the columns determining the flow composition.</p></li>
<li><p><strong>rate</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>) – Prefix of the columns where the calculated rate will be stored.</p></li>
<li><p><strong>Tref</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Reference temperature of the flow measurement, used when <code class="docutils literal notranslate"><span class="pre">comp</span></code> is a mol
fraction. Can be a column name or a numerical value in Kelvin; by default
set to 0°C.</p></li>
<li><p><strong>pref</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>]) – Reference pressure of the flow measurement, used when <code class="docutils literal notranslate"><span class="pre">comp</span></code> is a mol
fraction. Can be a column name or a numerical value in Pa; by default set
to 1 atm.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="dgpost.html" class="btn btn-neutral float-left" title="dgpost package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="dgpost.transform.circuit_utils.html" class="btn btn-neutral float-right" title="dgpost.transform.circuit_utils package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Peter Kraus.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>